{"version":3,"sources":["components/charts.ts","explorer-rock-properties-components.min.js","components/clipship.ts","components/cluster.ts","components/clusters.ts","components/config.ts","components/control-panel.ts","components/filters.ts","components/gws-util.ts","components/points.ts","components/query-builder-export.ts","components/spinner.ts","components/zoom.ts","templates/templates.ts"],"names":["rpComponents","rpComponents.chartService","rpComponents.chartService.ClusterChartCtrl","rpComponents.chartService.ClusterChartCtrl.constructor","rpComponents.chartService.ClusterChartService","rpComponents.chartService.ClusterChartService.constructor","rpComponents.chartService.ClusterChartService.hideChart","rpComponents.chartService.ClusterChartService.buildChart","rpComponents.chartService.ClusterChartService.buildChart.drawLegend","width","i","legendWidth","legendSpacing","height","color","d","attributeName","charSpace","radius","length","substring","total","d3","sum","property","data","map","count","Math","round","rpComponents.chartService.ClusterChartService.buildChart.prevLegend","rpComponents.chartService.ClusterChartService.buildChart.nextLegend","this","_current","percent","tooltip","select","html","style","x","event","pageX","panelWidth","y","pageY","document","body","clientHeight","getElementById","display","templateUrl","controller","ClusterChartCtrl","controllerAs","rpComponents.clipShipService","rpComponents.clipShipService.RocksClipShipCtrl","rpComponents.clipShipService.RocksClipShipCtrl.constructor","rpComponents.clipShipService.RocksClipShipCtrl.startClipShip","rpComponents.clipShipService.RocksClipShipService","rpComponents.clipShipService.RocksClipShipService.constructor","rpComponents.clipShipService.RocksClipShipService.startDraw","rpComponents.clipShipService.RocksClipShipService.openGeoserver","rpComponents.clipShipService.RocksClipShipService.updateExportFormat","RocksClipShipCtrl","rpComponents.cluster","rpComponents.cluster.Cluster","rpComponents.cluster.Cluster.constructor","rpComponents.clusterService","rpComponents.clusterService.RocksClusterFilterCtrl","rpComponents.clusterService.RocksClusterFilterCtrl.constructor","rpComponents.clusterService.ClusterService","rpComponents.clusterService.ClusterService.constructor","rpComponents.clusterService.ClusterService.init","rpComponents.clusterService.ClusterService.setHighlighted","rpComponents.clusterService.ClusterService.clearHighlighted","rpComponents.clusterService.ClusterService.toggleClusters","rpComponents.clusterService.ClusterService.getClusters","rpComponents.clusterService.ClusterService.queryCluster","rpComponents.clusterService.ClusterService.drawClusters","rpComponents.clusterService.ClusterService.buildSphereInstance","rpComponents.clusterService.ClusterService.buildLabel","rpComponents.clusterService.ClusterService.computeClusterAttributes","RocksClusterFilterCtrl","rpComponents.config","rpComponents.config.RocksConfigService","rpComponents.config.RocksConfigService.constructor","rpComponents.config.RocksConfigService.setConfig","rpComponents.controlPanel","rpComponents.controlPanel.RocksPanelCtrl","rpComponents.controlPanel.RocksPanelCtrl.constructor","rpComponents.controlPanel.RocksPanelCtrl.setTargetPanel","rpComponents.controlPanel.RocksPanelService","rpComponents.controlPanel.RocksPanelService.constructor","rpComponents.controlPanel.RocksPanelService.init","rpComponents.controlPanel.RocksPanelService.toggleRocksPanel","rpComponents.controlPanel.RocksPanelService.enableRocksPanel","rpComponents.controlPanel.RocksPanelService.toggleClusters","rpComponents.controlPanel.RocksPanelService.togglePoints","RocksPanelCtrl","rpComponents.filters","rpComponents.filters.RocksFiltersService","rpComponents.filters.RocksFiltersService.constructor","rpComponents.filters.RocksFiltersService.setAllExportSelected","rpComponents.gwsUtilService","rpComponents.gwsUtilService.GwsUtilService","rpComponents.gwsUtilService.GwsUtilService.constructor","rpComponents.gwsUtilService.GwsUtilService.getWfsFeatureTypeNames","console","log","err","deferred","error","rpComponents.gwsUtilService.GwsUtilService.getFeatureTypeNamesFromWfsCapsJson","rpComponents.gwsUtilService.GwsUtilService.getWmsLayerNames","rpComponents.gwsUtilService.GwsUtilService.getLayerNamesFromWmsCapsJson","rpComponents.gwsUtilService.GwsUtilService.xmlToJson","rpComponents.pointsService","rpComponents.pointsService.RocksWmsPointsCtrl","rpComponents.pointsService.RocksWmsPointsCtrl.constructor","rpComponents.pointsService.WmsPointsService","rpComponents.pointsService.WmsPointsService.constructor","rpComponents.pointsService.WmsPointsService.init","rpComponents.pointsService.WmsPointsService.togglePoints","rpComponents.pointsService.WmsPointsService.getLegendData","rpComponents.pointsService.WmsPointsService.updatePointsLayer","RocksWmsPointsCtrl","rpComponents.queryBuilderExport","rpComponents.queryBuilderExport.QueryBuilder","rpComponents.queryBuilderExport.QueryBuilder.constructor","rpComponents.queryBuilderExport.QueryBuilder.startClipShip","rpComponents.queryBuilderExport.QueryBuilder.buildQuery","rpComponents.queryBuilderExport.QueryBuilder.buildQuery.isEmpty","rpComponents.queryBuilderExport.QueryBuilder.getFilters","rpComponents.queryBuilderExport.QueryBuilder.getPropertyQuery","rpComponents.queryBuilderExport.QueryBuilder.getTypeNamesQuery","rpComponents.spinnerService","rpComponents.spinnerService.LoadingSpinnerService","rpComponents.spinnerService.LoadingSpinnerService.addSpinner","spin","selection","duration","interpolateString","min","config","tau","PI","arc","svg","innerRadius","outerRadius","startAngle","container","append","attr","id","datum","endAngle","call","rpComponents.zoom","rpComponents.zoom.ZoomLevelService","rpComponents.zoom.ZoomLevelService.constructor","rpComponents.zoom.ZoomLevelService.getIndex","rpComponents.zoom.ZoomLevelService.setActive","rpComponents.zoom.ZoomLevelService.getViewExtent","angular","module","run","$templateCache","put"],"mappings":"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","file":"explorer-rock-properties-components.min.js","sourceRoot":"/source/","sourcesContent":[null,"var rpComponents;!function(e){var t;!function(t){\"use strict\";var r=function(){function e(e,t,r){this.$scope=e,this.clusterChartService=t,this.clusterService=r}return e.$inject=[\"$scope\",\"clusterChartService\",\"clusterService\"],e}();t.ClusterChartCtrl=r;var i=function(){function e(e,t){this.$http=e,this.$rootScope=t}return e.prototype.hideChart=function(){this.$rootScope.$broadcast(\"chart.update\",{targetChartId:!1})},e.prototype.buildChart=function(e){document.getElementById(\"cluster-summary-chart-d3\").innerHTML=\"\",this.$rootScope.$broadcast(\"chart.update\",{targetChartId:\"clusterSummaryChart\"});var t,r,i,n,o=1250,s=255,c=e.length<7?e.length:4;.35*document.body.clientHeight>s&&document.body.clientWidth>o?(i={top:0,right:10,bottom:0,left:10},t=document.body.clientWidth/c-(2*i.left+i.right),r=.35*document.body.clientHeight,n=20):(i={top:0,right:5,bottom:0,left:5},t=o/c-(2*i.left+i.right),r=s,n=15);var a=document.body.clientWidth-(2*i.left+i.right),l=Math.min(t,r)/2;e.forEach(function(e){function o(i,n,o,a){var h=u.selectAll(\"g.legendg\").data(i).enter().append(\"g\").attr(\"class\",\"legendg\").attr(\"transform\",function(e,i){return\"translate(\"+-(t/2.3)+\",\"+(i*(y+k)-r/4)+\")\"}),d=h.append(\"rect\").attr(\"x\",45).attr(\"width\",y).attr(\"height\",y).attr(\"class\",\"legend\").style(\"fill\",function(e,t){return p(e.attributeName)}),v=h.append(\"text\").attr(\"x\",65).attr(\"y\",6).attr(\"dy\",\".35em\").style(\"text-anchor\",\"start\").text(function(e){var t=(l-20)/5;return e.attributeName.length>t?e.attributeName.substring(0,t)+\"...\":e.attributeName});if(d.append(\"svg:title\").text(function(t){var r=d3.sum(e.data.map(function(e){return e.count}));return t.attributeName+\" (\"+Math.round(1e3*t.count/r)/10+\"%)\"}),v.append(\"svg:title\").text(function(t){var r=d3.sum(e.data.map(function(e){return e.count}));return t.attributeName+\" (\"+Math.round(1e3*t.count/r)/10+\"%)\"}),a>1){var g=u.append(\"g\").attr(\"class\",\"pageNo\").attr(\"transform\",\"translate(-10,\"+((n+1)*(y+k)-r/4)+\")\");g.append(\"text\").text(o+\"/\"+a).attr(\"dx\",\".25em\");var f=u.append(\"g\").attr(\"class\",\"prev\").attr(\"transform\",\"translate(-20,\"+((n+1.5)*(y+k)-r/4)+\")\").on(\"click\",s).style(\"cursor\",\"pointer\"),m=u.append(\"g\").attr(\"class\",\"next\").attr(\"transform\",\"translate(0,\"+((n+1.5)*(y+k)-r/4)+\")\").on(\"click\",c).style(\"cursor\",\"pointer\");m.append(\"polygon\").style(\"stroke\",\"#000\").style(\"fill\",\"#000\").attr(\"points\",\"0,0, 20,0, 10,10\"),f.append(\"polygon\").style(\"stroke\",\"#000\").style(\"fill\",\"#000\").attr(\"points\",\"0,10, 20,10, 10,0\"),o==a?(m.style(\"opacity\",\"0.3\"),m.on(\"click\",\"\").style(\"cursor\",\"\")):1==o&&(f.style(\"opacity\",\"0.3\"),f.on(\"click\",\"\").style(\"cursor\",\"\"))}}function s(){S--,u.selectAll(\"g.legendg\").remove(),u.select(\".pageNo\").remove(),u.select(\".prev\").remove(),u.select(\".next\").remove();for(var t=(S-1)*f,r=t+f,i=[],n=0;n<e.data.length;n++)n>=t&&r>n&&i.push(e.data[n]);o(i,f,S,m)}function c(){S++,u.selectAll(\"g.legendg\").remove(),u.select(\".pageNo\").remove(),u.select(\".prev\").remove(),u.select(\".next\").remove();for(var t=(S-1)*f,r=t+f,i=[],n=0;n<e.data.length;n++)n>=t&&r>n&&i.push(e.data[n]);o(i,f,S,m)}var p=d3.scale.category20(),u=d3.select(\"#cluster-summary-chart-d3\").append(\"svg\").attr(\"width\",t).attr(\"height\",r).style(\"margin-left\",i.left+\"px\").style(\"margin-right\",i.right+\"px\").append(\"g\").attr(\"transform\",\"translate(\"+t/2+\",\"+(r/2+10)+\")\"),h=d3.svg.arc().innerRadius(l-n).outerRadius(l),d=d3.layout.pie().value(function(e){return e.count}).sort(null),v=d3.select(\"#cluster-summary-chart-d3\").append(\"div\").attr(\"class\",\"cluster-summary-tooltip\");v.append(\"div\").attr(\"class\",\"attribute\"),v.append(\"div\").attr(\"class\",\"count\"),v.append(\"div\").attr(\"class\",\"percent\");var g=u.selectAll(\"path\").data(d(e.data)).enter().append(\"path\").attr(\"d\",h).attr(\"fill\",function(e,t){return p(e.data.attributeName)}).each(function(e){this._current=e});g.on(\"mouseover\",function(t){var r=d3.sum(e.data.map(function(e){return e.count})),i=Math.round(1e3*t.data.count/r)/10;v.select(\".attribute\").html(t.data.attributeName),v.select(\".count\").html(\"Count: \"+t.data.count),v.select(\".percent\").html(\"Percent: \"+i+\"%\"),v.style(\"display\",\"block\")}),g.on(\"mouseout\",function(){v.style(\"display\",\"none\")}),g.on(\"mousemove\",function(e){var t=d3.event.pageX>a-180?d3.event.pageX-180:d3.event.pageX,r=d3.event.pageY>document.body.clientHeight-120?d3.event.pageY-100:d3.event.pageY+10;v.style(\"top\",r+\"px\").style(\"left\",t+\"px\")}),u.append(\"g\").attr(\"class\",\"cluster-summary-chart-title\").append(\"text\").attr(\"x\",0).attr(\"y\",-(r/2+7)).attr(\"dy\",\".71em\").style(\"text-anchor\",\"middle\").style(\"fill\",\"#000\").style(\"font-weight\",\"bold\").text(e.propertyName);var f,m,S,C=e.data.length,y=15,k=6,w=(y+k)*C;if(w/l>1){f=Math.floor(l/(y+k)),m=Math.ceil(C/f),S=1;for(var x=(S-1)*f,b=x+f,P=[],$=0;$<e.data.length;$++)$>=x&&b>$&&P.push(e.data[$]);o(P,f,S,m)}else o(e.data,Math.floor(l/(y+k)),1,1)}),document.getElementById(\"cluster-summary-chart-d3\").style.display=\"none\",setTimeout(function(){document.getElementById(\"cluster-summary-chart-loading\").style.display=\"none\",document.getElementById(\"cluster-summary-chart-d3\").style.display=\"block\"},1500)},e.$inject=[\"$http\",\"$rootScope\"],e}();t.ClusterChartService=i,angular.module(\"explorer.rockproperties.charts\",[]).factory(\"clusterChartService\",[\"$http\",\"$rootScope\",function(t,r){return new e.chartService.ClusterChartService(t,r)}]).controller(\"clusterChartCtrl\",r).directive(\"clusterChartSummary\",function(){return{templateUrl:\"rockprops/cluster-summary.html\",controller:r,controllerAs:\"clusterChartVM\"}})}(t=e.chartService||(e.chartService={}))}(rpComponents||(rpComponents={}));var rpComponents;!function(e){var t;!function(t){\"use strict\";var r=function(){function e(e,t,r,i,n,o){this.$scope=e,this.$timeout=t,this.rocksClipShipService=r,this.rocksPanelService=i,this.rocksFiltersService=n,this.rocksQueryBuilderExport=o}return e.prototype.startClipShip=function(){var e=this;this.$timeout(function(){e.rocksClipShipService.step=\"download\",e.rocksQueryBuilderExport.startClipShip(e.rocksFiltersService.exportProperties.filterOptions,e.rocksClipShipService.targetFormat,e.rocksClipShipService.targetExtent)})},e.$inject=[\"$scope\",\"$timeout\",\"rocksClipShipService\",\"rocksPanelService\",\"rocksFiltersService\",\"rocksQueryBuilderExport\"],e}();t.RocksClipShipCtrl=r;var i=function(){function e(e,t,r){var i=this;this.$rootScope=e,this.rocksFiltersService=t,this.rocksConfigService=r,this.step=\"startDraw\",this.$inject=[\"$rootScope\",\"rocksFiltersService\",\"rocksConfigService\"],this.$rootScope.$on(\"rocks.config.ready\",function(){i.exportFormats=i.rocksConfigService.config.geoserverWfsExportFormats}),this.$rootScope.$on(\"rocks.extent.ready\",function(e,t){i.step=\"selectFeatures\",i.targetExtent=t})}return e.prototype.startDraw=function(){this.$rootScope.$broadcast(\"draw.extent.start\",\"rocks.extent.ready\")},e.prototype.openGeoserver=function(){var e=window.open(this.rocksConfigService.config.geoserverDashboardUrl,\"_blank\");e&&e.focus()},e.prototype.updateExportFormat=function(e){this.targetFormat=e},e}();t.RocksClipShipService=i,angular.module(\"explorer.rockproperties.clipship\",[]).factory(\"rocksClipShipService\",[\"$rootScope\",\"rocksFiltersService\",\"rocksConfigService\",function(t,r,i){return new e.clipShipService.RocksClipShipService(t,r,i)}]).controller(\"rocksClipShipCtrl\",r).directive(\"rocksClipShip\",function(){return{templateUrl:\"rockprops/clip-ship.html\",controller:r,controllerAs:\"rocksClipShipVM\"}}).filter(\"noClipSelected\",[function(e){return function(e){if(e){for(var t=0;t<e.length;t++)if(e[t].isSelected)return!1;return!0}}}])}(t=e.clipShipService||(e.clipShipService={}))}(rpComponents||(rpComponents={}));var rpComponents;!function(e){var t;!function(e){\"use strict\";var t=function(){function e(e,t,r,i,n,o,s,c,a){this.count=e,this.lat=t,this.lon=r,this.elev=i,this.lithologyGroup=n,this.property=o,this.provinceName=s,this.sampleType=c,this.stratigraphicUnitName=a}return e.$inject=[\"count\",\"lat\",\"lon\",\"elev\",\"lithologyGroup\",\"property\",\"provinceName\",\"sampleType\",\"stratigraphicUnitName\"],e}();e.Cluster=t}(t=e.cluster||(e.cluster={}))}(rpComponents||(rpComponents={}));var rpComponents;!function(e){var t;!function(t){\"use strict\";var r=function(){function e(e,t,r,i){this.$scope=e,this.clusterService=t,this.rocksPanelService=r,this.rocksFiltersService=i}return e.$inject=[\"$scope\",\"clusterService\",\"rocksPanelService\",\"rocksFiltersService\"],e}();t.RocksClusterFilterCtrl=r;var i=function(){function e(e,t,r,i,n,o){var s=this;this.$http=e,this.$rootScope=t,this.zoomLevelService=r,this.clusterChartService=i,this.loadingSpinnerService=n,this.rocksConfigService=o,this.reCluster=function(){var e=[],t=new Cesium.LabelCollection;s.getClusters().then(function(r){if(r.data){for(var i=r.data,n=0;n<i.length;n++)e.push(s.buildSphereInstance(i[n])),t.add(s.buildLabel(i[n]));s.drawClusters(e,t)}else console.log(\"got no clusters\")})}}return e.prototype.init=function(e){var t=this;this.viewer=e,this.zoomLevelService.viewer=e,this.serviceUrl=this.rocksConfigService.config.clusterServiceUrl,this.$rootScope.$on(\"rocks.clusters.update\",function(){t.reCluster()}),this.rocksConfigService.config.useClusterPicking&&(this.pickHandler=new Cesium.ScreenSpaceEventHandler(this.viewer.scene.canvas),this.pickHandlerAction=function(e){var r=t.viewer.scene.pick(e.position);Cesium.defined(r)&&r.hasOwnProperty(\"id\")&&r.id.hasOwnProperty(\"lat\")&&(t.clearHighlighted(),t.targetId=r.id,t.queryCluster(t.targetId),t.setHighlighted(t.targetId,!0))},this.pickHandler.setInputAction(this.pickHandlerAction,Cesium.ScreenSpaceEventType.LEFT_CLICK))},e.prototype.setHighlighted=function(e,t){var r=this.clusterPrimitive.getGeometryInstanceAttributes(e);r&&t&&(r.prevColor=r.color,r.color=Cesium.ColorGeometryInstanceAttribute.toValue(Cesium.Color.fromCssColorString(\"#F5ED05\").withAlpha(1)))},e.prototype.clearHighlighted=function(){if(this.targetId){var e=this.clusterPrimitive.getGeometryInstanceAttributes(this.targetId);e&&e.hasOwnProperty(\"prevColor\")&&(e.color=e.prevColor)}},e.prototype.toggleClusters=function(){return this.clustersCollection?(this.clustersCollection.show=!this.clustersCollection.show,this.zoomLevelService.setActive(this.clustersCollection.show),this.clustersCollection.show?this.pickHandler.setInputAction(this.pickHandlerAction,Cesium.ScreenSpaceEventType.LEFT_CLICK):this.pickHandler.removeInputAction(Cesium.ScreenSpaceEventType.LEFT_CLICK),this.reCluster()):(this.clustersCollection=new Cesium.PrimitiveCollection,this.viewer.scene.primitives.add(this.clustersCollection),this.zoomLevelService.setActive(!0),this.reCluster()),this.clustersCollection.show},e.prototype.getClusters=function(){return this.$http({method:\"GET\",url:this.serviceUrl+\"/\"+this.zoomLevelService.nextIndex+\".json\",headers:{\"Content-Type\":\"application/json\"},data:{heightIndex:this.zoomLevelService.nextIndex,extent:this.zoomLevelService.getViewExtent(100)}})},e.prototype.queryCluster=function(e){var t=this;this.summarySpinner?document.getElementById(\"cluster-summary-chart-loading\").style.display=\"block\":(this.summarySpinner=this.loadingSpinnerService.addSpinner({width:100,height:100,container:\"#cluster-summary-chart-loading\",id:\"chart-spinner\"}),this.summarySpinner()),this.$http({method:\"GET\",url:this.serviceUrl+\"/cluster.json\",headers:{\"Content-Type\":\"application/json\"},data:{targetCluster:e}}).then(function(e){e.hasOwnProperty(\"data\")&&t.clusterChartService.buildChart(e.data)})},e.prototype.drawClusters=function(e,t){this.clustersCollection.removeAll(),this.clusterPrimitive=new Cesium.Primitive({geometryInstances:e,appearance:new Cesium.PerInstanceColorAppearance({translucent:!0,closed:!0})}),this.clustersCollection.add(this.clusterPrimitive),this.clustersCollection.add(t)},e.prototype.buildSphereInstance=function(e){var t=this.computeClusterAttributes(e.count),r=Cesium.Cartesian3.fromDegrees(e.lon,e.lat),i=Cesium.Matrix4.multiplyByTranslation(Cesium.Transforms.eastNorthUpToFixedFrame(r),new Cesium.Cartesian3(e.lon,e.lat,t.size),new Cesium.Matrix4),n=new Cesium.SphereGeometry({vertexFormat:Cesium.PerInstanceColorAppearance.VERTEX_FORMAT,radius:t.size}),o=new Cesium.GeometryInstance({geometry:n,modelMatrix:i,vertexFormat:Cesium.EllipsoidSurfaceAppearance.VERTEX_FORMAT,attributes:{color:Cesium.ColorGeometryInstanceAttribute.fromColor(t.color)},id:e});return o},e.prototype.buildLabel=function(e){var t=this.computeClusterAttributes(e.count);return{position:Cesium.Cartesian3.fromDegrees(e.lon,e.lat,20+2*t.size),text:e.count.toString(),fillColor:Cesium.Color.BLACK,outlineColor:Cesium.Color.RED,font:\"30px arial, sans-serif\",horizontalOrigin:Cesium.HorizontalOrigin.CENTER,id:e}},e.prototype.computeClusterAttributes=function(e){return 100>e?{size:1e4*this.zoomLevelService.nextIndex,color:Cesium.Color.fromCssColorString(\"#4781cd\").withAlpha(.5)}:e>=10&&1e3>e?{size:1e4*this.zoomLevelService.nextIndex,color:Cesium.Color.fromCssColorString(\"#0fc70e\").withAlpha(.5)}:{size:1e4*this.zoomLevelService.nextIndex,color:Cesium.Color.fromCssColorString(\"#ff0000\").withAlpha(.5)}},e.$inject=[\"$http\",\"$rootScope\",\"zoomLevelService\",\"clusterChartService\",\"loadingSpinnerService\",\"rocksConfigService\"],e}();t.ClusterService=i,angular.module(\"explorer.rockproperties.clusters\",[]).controller(\"rocksClusterFilterCtrl\",r).directive(\"rocksClusterFilters\",function(){return{templateUrl:\"rockprops/cluster-filters.html\",controller:r,controllerAs:\"rocksClusterFilterVM\"}}).factory(\"clusterService\",[\"$http\",\"$rootScope\",\"zoomLevelService\",\"clusterChartService\",\"loadingSpinnerService\",\"rocksConfigService\",function(t,r,i,n,o,s){return new e.clusterService.ClusterService(t,r,i,n,o,s)}])}(t=e.clusterService||(e.clusterService={}))}(rpComponents||(rpComponents={}));var rpComponents;!function(e){var t;!function(t){\"use strict\";var r=function(){function e(e){this.$rootScope=e}return e.prototype.setConfig=function(e){this.config=e,this.$rootScope.$broadcast(\"rocks.config.ready\")},e.$inject=[\"$rootScope\"],e}();t.RocksConfigService=r,angular.module(\"explorer.rockproperties.config\",[]).factory(\"rocksConfigService\",[\"$rootScope\",function(t){return new e.config.RocksConfigService(t)}])}(t=e.config||(e.config={}))}(rpComponents||(rpComponents={}));var rpComponents;!function(e){var t;!function(t){\"use strict\";var r=function(){function e(e,t){this.$scope=e,this.rocksPanelService=t,this.targetPanel=\"\"}return e.prototype.setTargetPanel=function(e){this.targetPanel=this.targetPanel!=e?e:\"\"},e.$inject=[\"$scope\",\"rocksPanelService\"],e}();t.RocksPanelCtrl=r;var i=function(){function e(e,t,r,i){this.$rootScope=e,this.clusterService=t,this.wmsPointsService=r,this.rocksConfigService=i,this.rocksPanelActive=!1,this.clustersEnabled=!1,this.pointsEnabled=!1}return e.prototype.init=function(e,t){this.viewer=e,this.rocksConfigService.setConfig(t),this.clusterService.init(e),this.wmsPointsService.init(e)},e.prototype.toggleRocksPanel=function(){this.rocksPanelActive=!this.rocksPanelActive},e.prototype.enableRocksPanel=function(e){this.rocksPanelActive=e},e.prototype.toggleClusters=function(){this.clustersEnabled=this.clusterService.toggleClusters()},e.prototype.togglePoints=function(){this.pointsEnabled=this.wmsPointsService.togglePoints()},e.$inject=[\"$rootScope\",\"clusterService\",\"wmsPointsService\",\"rocksConfigService\"],e}();t.RocksPanelService=i,angular.module(\"explorer.rockproperties.controlpanel\",[]).factory(\"rocksPanelService\",[\"$rootScope\",\"clusterService\",\"wmsPointsService\",\"rocksConfigService\",function(t,r,i,n){return new e.controlPanel.RocksPanelService(t,r,i,n)}]).controller(\"rocksPanelCtrl\",r).directive(\"rocksControlPanel\",function(){return{templateUrl:\"rockprops/control-panel.html\",controller:r,controllerAs:\"controlPanelVM\"}})}(t=e.controlPanel||(e.controlPanel={}))}(rpComponents||(rpComponents={}));var rpComponents;!function(e){var t;!function(t){\"use strict\";var r=function(){function e(e,t,r){var i=this;this.$http=e,this.$rootScope=t,this.rocksConfigService=r,this.$inject=[\"$http\",\"$rootScope\",\"rocksConfigService\"],this.$rootScope.$on(\"rocks.config.ready\",function(){e.get(i.rocksConfigService.config.filterNamesServiceUrl).then(function(e){i.filters=e.data;for(var t=0;t<i.filters.length;t++)if(\"PROPERTY\"==i.filters[t].filterType){for(var r=angular.copy(i.filters[t].filterOptions),n=0;n<r.length;n++)r[n]={name:r[n],isSelected:!1};var o=angular.copy(i.filters[t]);o.filterOptions=r,i.exportProperties=o}}),function(e){console.log(\"Failed to get rock props filters\"),console.log(e)}})}return e.prototype.setAllExportSelected=function(e){for(var t=0;t<this.exportProperties.filterOptions.length;t++)this.exportProperties.filterOptions[t].isSelected=e},e}();t.RocksFiltersService=r,angular.module(\"explorer.rockproperties.filters\",[]).factory(\"rocksFiltersService\",[\"$http\",\"$rootScope\",\"rocksConfigService\",function(t,r,i){return new e.filters.RocksFiltersService(t,r,i)}])}(t=e.filters||(e.filters={}))}(rpComponents||(rpComponents={}));var rpComponents;!function(e){var t;!function(t){\"use strict\";var r=function(){function e(e,t,r){this.$q=e,this.$http=t,this.rocksConfigService=r}return e.prototype.getWfsFeatureTypeNames=function(){var e=this,t=this.$q.defer();return this.$http.get(this.rocksConfigService.config.geoserverWfsUrl+\"?request=GetCapabilities&service=wfs&version=\"+this.rocksConfigService.config.geoserverWfsVersion).success(function(r,i,n,o){var s=e.getFeatureTypeNamesFromWfsCapsJson(e.xmlToJson($.parseXML(r)));t.resolve(s)}).error(function(e){console.log(\"GetCapabilities request failed\"),console.log(e),t.error()}),t.promise},e.prototype.getFeatureTypeNamesFromWfsCapsJson=function(e){for(var t=e[\"wfs:WFS_Capabilities\"].FeatureTypeList.FeatureType,r=[],i=0;i<t.length;i++)r.push(t[i].Name[\"#text\"]);return r},e.prototype.getWmsLayerNames=function(){var e=this,t=this.$q.defer();return this.$http.get(this.rocksConfigService.config.geoserverWmsUrl+\"?request=GetCapabilities&service=wms&version=\"+this.rocksConfigService.config.geoserverWmsVersion).success(function(r,i,n,o){var s=e.getLayerNamesFromWmsCapsJson(e.xmlToJson($.parseXML(r)));t.resolve(s)}).error(function(e){console.log(\"GetCapabilities request failed\"),console.log(e),t.error()}),t.promise},e.prototype.getLayerNamesFromWmsCapsJson=function(e){for(var t=e.WMS_Capabilities.Capability.Layer.Layer,r=[],i=0;i<t.length;i++)r.push(t[i].Name[\"#text\"]);return r},e.prototype.xmlToJson=function(e){var t={};if(1==e.nodeType){if(e.attributes.length>0){t[\"@attributes\"]={};for(var r=0;r<e.attributes.length;r++){var i=e.attributes.item(r);t[\"@attributes\"][i.nodeName]=i.nodeValue}}}else 3==e.nodeType&&(t=e.nodeValue);if(e.hasChildNodes())for(var n=0;n<e.childNodes.length;n++){var o=e.childNodes.item(n),s=o.nodeName;if(\"undefined\"==typeof t[s])t[s]=this.xmlToJson(o);else{if(\"undefined\"==typeof t[s].push){var c=t[s];t[s]=[],t[s].push(c)}t[s].push(this.xmlToJson(o))}}return t},e.$inject=[\"$q\",\"$http\",\"rocksConfigService\"],e}();t.GwsUtilService=r,angular.module(\"explorer.rockproperties.gwsutil\",[]).factory(\"gwsUtilService\",[\"$q\",\"$http\",\"rocksConfigService\",function(t,r,i){return new e.gwsUtilService.GwsUtilService(t,r,i)}])}(t=e.gwsUtilService||(e.gwsUtilService={}))}(rpComponents||(rpComponents={}));var rpComponents;!function(e){var t;!function(t){\"use strict\";var r=function(){function e(e,t,r){this.$scope=e,this.wmsPointsService=t,this.rocksPanelService=r}return e.$inject=[\"$scope\",\"wmsPointsService\",\"rocksPanelService\"],e}();t.RocksWmsPointsCtrl=r;var i=function(){function e(e,t){this.gwsUtilService=e,this.rocksConfigService=t,this.legendParamString=\"\",this.$inject=[\"gwsUtilService\",\"rocksConfigService\"]}return e.prototype.init=function(e){var t=this;this.wmsServiceUrl=this.rocksConfigService.config.geoserverWmsUrl,this.viewer=e,this.restrictedBounds=Cesium.Rectangle.fromDegrees(109,-45,158,-8),this.legendParamString=\"?\",angular.forEach(this.rocksConfigService.config.geoserverWmsLegendParams,function(e,r){t.legendParamString+=r+\"=\"+e+\"&\"}),this.legendParamString=this.legendParamString.slice(0,-1)+\"&LAYER=\",this.gwsUtilService.getWmsLayerNames().then(function(e){t.layers=e,t.getLegendData()})},e.prototype.togglePoints=function(){return this.pointsVisible=!this.pointsVisible,this.wmsLayer?this.wmsLayer.show=this.pointsVisible:this.updatePointsLayer(),this.pointsVisible},e.prototype.getLegendData=function(){this.legendData={};for(var e=0;e<this.layers.length;e++)this.legendData[this.layers[e]]={legendUrl:this.wmsServiceUrl+this.legendParamString+this.layers[e],isSelected:!0}},e.prototype.updatePointsLayer=function(){var e=[];for(var t in this.legendData)this.legendData.hasOwnProperty(t)&&this.legendData[t].isSelected===!0&&e.push(t);this.wmsLayer&&this.viewer.imageryLayers.remove(this.wmsLayer),this.wmsLayer=this.viewer.imageryLayers.addImageryProvider(new Cesium.WebMapServiceImageryProvider({url:this.wmsServiceUrl,layers:e.toString(),rectangle:this.restrictedBounds,parameters:{transparent:\"true\",format:\"image/png\"},enablePickFeatures:!1})),this.wmsLayer.alpha=.7},e}();t.WmsPointsService=i,angular.module(\"explorer.rockproperties.wmspoints\",[]).factory(\"wmsPointsService\",[\"gwsUtilService\",\"rocksConfigService\",function(t,r){return new e.pointsService.WmsPointsService(t,r)}]).controller(\"rocksWmsPointsCtrl\",r).directive(\"rocksWmsPointsLegend\",function(){return{templateUrl:\"rockprops/points-legend.html\",controller:r,controllerAs:\"rocksWmsPointsVM\"}})}(t=e.pointsService||(e.pointsService={}))}(rpComponents||(rpComponents={}));var rpComponents;!function(e){var t;!function(t){\"use strict\";var r=function(){function e(e,t,r,i,n,o,s){var c=this;this.$q=e,this.$http=t,this.$rootScope=r,this.loadingSpinnerService=i,this.rocksClipShipService=n,this.rocksConfigService=o,this.gwsUtilService=s,this.propertyQuery=\"\",this.$inject=[\"$q\",\"$http\",\"$rootScope\",\"loadingSpinnerService\",\"rocksClipShipService\",\"rocksConfigService\",\"gwsUtilService\"],this.$rootScope.$on(\"rocks.config.ready\",function(){c.baseUrl=c.rocksConfigService.config.geoserverWfsUrl+\"?\",angular.forEach(c.rocksConfigService.config.geoserverWfsExportParams,function(e,t){c.baseUrl+=t+\"=\"+e+\"&\"}),c.baseUrl=c.baseUrl.slice(0,-1),c.gwsUtilService.getWfsFeatureTypeNames().then(function(e){c.wfsLayerNames=e})})}return e.prototype.startClipShip=function(e,t,r){var i=this;this.loading=!0,this.loadingSpinner||(this.loadingSpinner=this.loadingSpinnerService.addSpinner({width:80,height:80,container:\"#rock-clip-ship-loading\",id:\"clip-ship-spinner\"}),this.loadingSpinner());for(var n=[],o=0;o<e.length;o++)e[o].isSelected&&n.push(e[o].name);if(\"csv\"===t){var s=new JSZip;if(JSZip.support.blob){var c=[];console.log(\"this.wfsLayerNames\"),console.log(this.wfsLayerNames);for(var o=0;o<this.wfsLayerNames.length;o++){var a=this.buildQuery(n,r,t,[this.wfsLayerNames[o]]),l=this.$http.get(a);c.push(l)}this.$q.all(c).then(function(e){for(var t=0;t<e.length;t++){var r=(e[t].data.match(/\\n/g)||[]).length;if(r>1){var n=i.wfsLayerNames[t].split(\" \").join(\"-\");s.file(n+\".csv\",e[t].data+\"\\n\")}}var o=s.generate({type:\"blob\"});saveAs(o,\"rocks-export.zip\"),i.loading=!1,i.rocksClipShipService.step=\"startDraw\"})}else{for(var o=0;o<this.wfsLayerNames.length;o++)window.open(this.buildQuery(n,r,t,[this.wfsLayerNames[o]]));this.loading=!1}}else this.exportUrl=this.buildQuery(n,r,t,this.wfsLayerNames),this.loading=!1},e.prototype.buildQuery=function(e,t,r,i){function n(e){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0}var o,s=this.getTypeNamesQuery(i),c=\"&CQL_FILTER=BBOX(GEOM,\"+t.west+\",\"+t.south+\",\"+t.east+\",\"+t.north+\")\",a=\"\",l={},p=\"&outputFormat=\"+r,u=!n(l),h=l.hasOwnProperty(\"PROPERTY\"),d=h&&1===Object.keys(l).length?!0:!1;return u&&h?(this.propertyQuery=\"%20AND%20PROPERTY='\"+l.PROPERTY+\"'\",d||(a=this.getFilters(l))):u?(this.propertyQuery=this.getPropertyQuery(e),d||(a=this.getFilters(l))):this.propertyQuery=this.getPropertyQuery(e),o=this.baseUrl+s+p+c+a+this.propertyQuery},e.prototype.getFilters=function(e){var t=\"%20AND%20\";for(var r in e)\"PROPERTY\"!==r&&(t=t.concat(r+\"='\"+e[r]+\"'%20AND%20\"));return t=t.substring(0,t.length-9)},e.prototype.getPropertyQuery=function(e){for(var t=\"%20AND%20(\",r=0;r<e.length;r++)t=t.concat(\"PROPERTY='\"+e[r]+\"'%20OR%20\");return t=t.substring(0,t.length-8),t=t.concat(\")\")},e.prototype.getTypeNamesQuery=function(e){for(var t=\"&typeName=\",r=0;r<e.length;r++)t=t.concat(e[r]+\",\");return t=t.substring(0,t.length-1)},e}();t.QueryBuilder=r,angular.module(\"explorer.rockproperties.queryexport\",[]).factory(\"rocksQueryBuilderExport\",[\"$q\",\"$http\",\"$rootScope\",\"loadingSpinnerService\",\"rocksClipShipService\",\"rocksConfigService\",\"gwsUtilService\",function(t,r,i,n,o,s,c){return new e.queryBuilderExport.QueryBuilder(t,r,i,n,o,s,c)}])}(t=e.queryBuilderExport||(e.queryBuilderExport={}))}(rpComponents||(rpComponents={}));var rpComponents;!function(e){var t;!function(t){\"use strict\";var r=function(){function e(){}return e.prototype.addSpinner=function(e){return function(){function t(e,r){e.transition().ease(\"linear\").duration(r).attrTween(\"transform\",function(){return d3.interpolateString(\"rotate(0)\",\"rotate(360)\")}),setTimeout(function(){t(e,r)},r)}var r=Math.min(e.width,e.height)/2,i=2*Math.PI,n=d3.svg.arc().innerRadius(.5*r).outerRadius(.9*r).startAngle(0),o=d3.select(e.container).append(\"svg\").attr(\"id\",e.id).attr(\"width\",e.width).attr(\"height\",e.height).append(\"g\").attr(\"transform\",\"translate(\"+e.width/2+\",\"+e.height/2+\")\");o.append(\"path\").datum({endAngle:.33*i}).style(\"fill\",\"#4D4D4D\").attr(\"d\",n).call(t,1500)}},e}();t.LoadingSpinnerService=r,angular.module(\"explorer.rockproperties.spinner\",[]).factory(\"loadingSpinnerService\",[function(){return new e.spinnerService.LoadingSpinnerService}])}(t=e.spinnerService||(e.spinnerService={}))}(rpComponents||(rpComponents={}));var rpComponents;!function(e){var t;!function(t){\"use strict\";var r=function(){function e(e){var t=this;this.$rootScope=e,this.zoomLevels=[5e3,1e4,2e4,4e4,75e4,15e5,25e5,35e5,55e5,65e5,8e6],this.defaultExtent={west:109,south:-45,east:158,north:-8},this.moveEndHandler=function(){t.nextIndex=t.getIndex(Cesium.Ellipsoid.WGS84.cartesianToCartographic(t.viewer.camera.position).height),t.previousIndex>-1&&t.previousIndex!=t.nextIndex&&t.$rootScope.$broadcast(\"rocks.clusters.update\",t.nextIndex),t.previousIndex=t.nextIndex}}return e.prototype.getIndex=function(e){for(var t=0;t<this.zoomLevels.length;t++)if(e<this.zoomLevels[t])return t;return this.zoomLevels.length-1},e.prototype.setActive=function(e){e?(this.previousIndex=this.getIndex(Cesium.Ellipsoid.WGS84.cartesianToCartographic(this.viewer.camera.position).height),this.nextIndex=this.previousIndex,this.viewer.camera.moveEnd.addEventListener(this.moveEndHandler)):this.viewer.camera.moveEnd.removeEventListener(this.moveEndHandler)},e.prototype.getViewExtent=function(e){var t=Cesium.Ellipsoid.WGS84,r=window.devicePixelRatio||1,i=new Cesium.Cartesian2(-e,-e),n=this.viewer.scene.camera.pickEllipsoid(i,t);i=new Cesium.Cartesian2(this.viewer.scene.canvas.width/r+e,this.viewer.scene.canvas.height/r+e);var o=this.viewer.scene.camera.pickEllipsoid(i,t);return null!=n&&null!=o?(n=t.cartesianToCartographic(n),o=t.cartesianToCartographic(o),n.longitude>o.longitude?this.defaultExtent:{west:Cesium.Math.toDegrees(n.longitude),south:Cesium.Math.toDegrees(o.latitude),east:Cesium.Math.toDegrees(o.longitude),north:Cesium.Math.toDegrees(n.latitude)}):this.defaultExtent},e.$inject=[\"$rootScope\"],e}();t.ZoomLevelService=r,angular.module(\"explorer.rockproperties.zoom\",[]).factory(\"zoomLevelService\",[\"$rootScope\",function(t){return new e.zoom.ZoomLevelService(t)}])}(t=e.zoom||(e.zoom={}))}(rpComponents||(rpComponents={})),angular.module(\"explorer.rockproperties.templates\",[]).run([\"$templateCache\",function(e){e.put(\"rockprops/clip-ship.html\",'\\n<div ng-show=\"rocksClipShipVM.rocksClipShipService.step == \\'startDraw\\'\">\\n\t<h6 class=\"dis-inline\">\\n\t\t1.\\n\t\t<button ng-click=\"rocksClipShipVM.rocksClipShipService.startDraw()\" style=\"padding: 5px 10px;border-radius: 3px;border: none;\">\\n\t\t\tClick here\\n\t\t</button>\\n\t\tto select an area on the map <i class=\"fa fa-scissors\" style=\"font-size: 16px;\"></i></h6>\\n</div>\\n\\n\\n<div ng-show=\"rocksClipShipVM.rocksClipShipService.step == \\'selectFeatures\\'\">\\n\\n\t<h6 class=\"dis-inline\">2. Select features to download:</h6>\\n\\n\t<div>\\n\\n\t\t<!-- if we have active property filters, use them instead -->\\n\t\t<p ng-show=\"hasAnyFilter\">\\n\t\t\t<i class=\"fa fa-info-circle\"></i> Current filters will be applied to the exported data.\\n\t\t</p>\\n\\n\t\t<div ng-hide=\"hasAnyFilter\">\\n\\n\t\t\t<div style=\"padding: 5px; margin-top: 10px; background: #f0f0f0; border-radius: 3px;\">\\n\t\t\t\t<label>\\n\t\t\t\t\t<input type=\"checkbox\" ng-model=\"masterCheck\" ng-disabled=\"hasPropertyFilter\" ng-change=\"rocksClipShipVM.rocksFiltersService.setAllExportSelected(masterCheck)\" />\\n\t\t\t\t\t{{ masterCheck ? \\'Deselect\\' : \\'Select\\' }} All\\n\t\t\t\t</label>\\n\t\t\t</div>\\n\\n\t\t\t<label style=\"margin-left: 25px;\" class=\"checkbox\" ng-repeat=\"property in rocksClipShipVM.rocksFiltersService.exportProperties.filterOptions\">\\n\t\t\t\t<input type=\"checkbox\" value=\"property.isSelected\" ng-model=\"property.isSelected\" ng-checked=\"masterCheck\" ng-disabled=\"hasPropertyFilter\">\\n\t\t\t\t{{ property.name }}\\n\t\t\t</label>\\n\\n\t\t</div>\\n\\n\t\t<div style=\"margin: 20px 0px 20px 0px;\">\\n\t\t\t<label title=\"Export Format\">Export Format</label>\\n\t\t\t<select ng-change=\"rocksClipShipVM.rocksClipShipService.updateExportFormat(exportFormats.SelectedOption)\"\\n\t\t\t\t\tng-model=\"exportFormats.SelectedOption\"\\n\t\t\t\t\tname=\"format\"\\n\t\t\t\t\tng-options=\"option for option in rocksClipShipVM.rocksClipShipService.exportFormats\"\\n\t\t\t\t\tng-class=\"form-control\"\\n\t\t\t\t\tclass=\"filter-input\"\\n\t\t\t\t\tstyle=\"float: right; width: 160px;\">\\n\t\t\t\t<option value=\"\" class=\"\">--select--</option>\\n\t\t\t</select>\\n\t\t</div>\\n\\n\t\t<a ng-click=\"rocksClipShipVM.rocksClipShipService.openGeoserver()\" style=\"font-size: 11px; margin-top: 20px; color: blue; text-decoration: underline;\">\\n\t\t\tMore Options via GeoServer Dashboard\\n\t\t</a>\\n\\n\t\t<div style=\"margin-top: 20px;\">\\n\t\t\t<button type=\"button\" class=\"btn btn-default\" ng-click=\"rocksClipShipVM.rocksClipShipService.step = \\'startDraw\\'\" title=\"Cancel Download\" style=\"width: 40%; float: left;\">Cancel</button>\\n\t\t\t<button type=\"button\"\\n\t\t\t\t\tclass=\"btn btn-default focusMe\"\\n\t\t\t\t\tng-click=\"rocksClipShipVM.startClipShip()\"\\n\t\t\t\t\tstyle=\"width: 40%; float: right\"\\n\t\t\t\t\ttitle=\"Select one or more reference feature classes before continuing.\"\\n\t\t\t\t\tng-disabled=\"(rocksClipShipVM.rocksFiltersService.exportProperties.filterOptions | noClipSelected) || (!rocksClipShipVM.rocksClipShipService.targetFormat)\">Next</button>\\n\t\t</div>\\n\\n\t</div>\\n\\n</div>\\n\\n<div ng-show=\"rocksClipShipVM.rocksClipShipService.step == \\'download\\'\">\\n\\n\t<h6>3. Data Export:</h6>\\n\\n\t<div ng-hide=\"rocksClipShipVM.rocksQueryBuilderExport.loading\">\\n\\n\t\t<p ng-show=\"rocksClipShipVM.rocksClipShipService.targetFormat === \\'application/json\\'\" style=\"margin-top: 40px;\">\\n\t\t\t<i class=\"fa fa-info-circle\"></i> Once json has loaded, save page as a .json file.\\n\t\t</p>\\n\\n\t\t<p class=\"warning-block\" style=\"margin-top: 20px;\">\\n\t\t\t<i class=\"fa fa-info-circle\"></i> Large data sets may take several minutes to export.\\n\t\t</p>\\n\\n\t\t<a class=\"btn btn-default\" target=\"_blank\" href=\"{{rocksClipShipVM.rocksQueryBuilderExport.exportUrl}}\" ng-click=\"rocksClipShipVM.rocksClipShipService.step = \\'startDraw\\'\" style=\"width: 100%; margin-top: 30px;\" role=\"button\">\\n\t\t\t<i class=\"fa fa-download\"></i> Download {{ rocksClipShipVM.rocksClipShipService.targetFormat }}\\n\t\t</a>\\n\\n\t\t<a class=\"btn btn-default\" href=\"javascript:;\" ng-click=\"rocksClipShipVM.rocksClipShipService.step = \\'selectFeatures\\'\" style=\"width: 100%; margin-top: 10px;\" role=\"button\">\\n\t\t\t<i class=\"fa fa-arrow-left\"></i> Back\\n\t\t</a>\\n\\n\t</div>\\n\\n</div>\\n\\n<div id=\"rock-clip-ship-loading\" ng-show=\"rocksClipShipVM.rocksQueryBuilderExport.loading\">\\n\t<p>Preparing Data..</p>\\n</div>'),e.put(\"rockprops/cluster-filters.html\",'\\n<!--\\n\\nTODO plug into rock props filter service\\n\\n-->\\n\\n<h5>Filters:</h5>\\n\\n<div ng-repeat=\"filter in rocksClusterFilterVM.rocksFiltersService.filters\" style=\"padding-top:7px;position:relative; overflow-x: hidden;overflow-y: auto;\">\\n\\n\t<label style=\"font-size: 11px;\" title=\"{{filter.filterLabel}}\">{{filter.filterLabel}}</label>\\n\t<select\\n\t\t\tng-change=\"filterChanged(filter.filterType, filter.SelectedOption)\"\\n\t\t\tng-model=\"filter.SelectedOption\"\\n\t\t\tname=\"filter.filterType\"\\n\t\t\tng-options=\"option as option for option in filter.filterOptions\"\\n\t\t\tng-class=\\'form-control\\'\\n\t\t\tclass=\\'filter-input\\'\\n\t\t\tstyle=\"float:left;width:100%;position:relative;\">\\n\t\t<option value=\"\" selected>--select--</option>\\n\t</select>\\n\\n</div>\\n\\n<div style=\"text-align: center;\">\\n\t<a class=\"btn btn-default\" style=\"margin: 10px;\" ng-click=\"applyFilters()\" href=\"javascript:;\" ng-disabled=\"!rocksClusterFilterVM.rocksPanelService.clustersEnabled\">\\n\t\t<i class=\"fa fa-filter fa-lg\"></i>\\n\t\tApply\\n\t</a>\\n\\n\t<a class=\"btn btn-default\" style=\"margin: 10px;\" ng-click=\"clearFilters()\" href=\"javascript:;\" ng-disabled=\"!rocksClusterFilterVM.rocksPanelService.clustersEnabled\">\\n\t\t<i class=\"fa fa-remove fa-lg\"></i>\\n\t\tClear\\n\t</a>\\n\\n\t<p ng-show=\"filterResultCount()\" style=\"text-align: left; margin: 10px; font-size: 14px;\">\\n\t\t<strong>Record Count: </strong>\\n\t\t14320\\n\t</p>\\n</div>\\n'),\ne.put(\"rockprops/cluster-summary.html\",'<div id=\"clusterSummaryChart\" ng-show=\"cossapChartState.targetChartId == \\'clusterSummaryChart\\'\">\\n\\n\t<div class=\"btn-group\" style=\"position: absolute;right: 10px;top: 10px;\">\\n\t\t<button type=\"button\" class=\"btn btn-default\" title=\"Close charts\" ng-click=\"clusterChartVM.clusterChartService.hideChart(); clusterChartVM.clusterService.clearHighlighted();\">\\n\t\t\t<i class=\"fa fa-times-circle\" role=\"presentation\" style=\"font-size:16px; color:black\"></i>\\n\t\t</button>\\n\t</div>\\n\\n\t<div id=\"cluster-summary-chart-d3\"></div>\\n\t<div id=\"cluster-summary-chart-loading\"></div>\\n\\n</div>'),e.put(\"rockprops/control-panel.html\",'<div>\\n\\n\t<div class=\"rocks-accordion\">\\n\t\t<div class=\"rocks-toggle-button\" title=\"Show/hide cluster features\">\\n\t\t\t<input type=\"checkbox\" ng-model=\"controlPanelVM.rocksPanelService.clustersEnabled\" ng-change=\"controlPanelVM.rocksPanelService.toggleClusters()\" />\\n\t\t</div>\\n\t\t<button class=\"title\" ng-click=\"controlPanelVM.setTargetPanel(\\'clusterFeatures\\')\">\\n\t\t\t<i class=\"fa fa-{{ controlPanelVM.targetPanel == \\'clusterFeatures\\' ? \\'minus\\' : \\'plus\\' }}\"></i>\\n\t\t\tCluster Features\\n\t\t</button>\\n\t</div>\\n\t<div class=\"rocks-accordion-content\" ng-show=\"controlPanelVM.targetPanel == \\'clusterFeatures\\'\">\\n\\n\t\t<rocks-cluster-filters></rocks-cluster-filters>\\n\\n\t</div>\\n\\n\t<div class=\"rocks-accordion\">\\n\t\t<div class=\"rocks-toggle-button\" title=\"Show/hide point features WMS layer\">\\n\t\t\t<input type=\"checkbox\" ng-model=\"controlPanelVM.rocksPanelService.pointsEnabled\" ng-change=\"controlPanelVM.rocksPanelService.togglePoints()\" />\\n\t\t</div>\\n\t\t<div class=\"title\" ng-click=\"controlPanelVM.setTargetPanel(\\'pointFeatures\\')\">\\n\t\t\t<i class=\"fa fa-{{ controlPanelVM.targetPanel == \\'pointFeatures\\' ? \\'minus\\' : \\'plus\\' }}\"></i>\\n\t\t\tPoint Features (WMS)\\n\t\t</div>\\n\t</div>\\n\\n\t<div class=\"rocks-accordion-content\" ng-show=\"controlPanelVM.targetPanel == \\'pointFeatures\\'\">\\n\\n\t\t<rocks-wms-points-legend></rocks-wms-points-legend>\\n\\n\t</div>\\n\\n\t<div class=\"rocks-accordion\">\\n\t\t<div class=\"title w100\" ng-click=\"controlPanelVM.setTargetPanel(\\'clipShip\\')\">\\n\t\t\t<i class=\"fa fa-{{ controlPanelVM.targetPanel == \\'clipShip\\' ? \\'minus\\' : \\'plus\\' }}\"></i>\\n\t\t\tDownload Rock Property Data\\n\t\t</div>\\n\t</div>\\n\\n\t<div class=\"rocks-accordion-content\" ng-show=\"controlPanelVM.targetPanel == \\'clipShip\\'\">\\n\\n\t\t<rocks-clip-ship></rocks-clip-ship>\\n\\n\t</div>\\n\\n</div>'),e.put(\"rockprops/points-legend.html\",'<div ng-repeat=\"legend in rocksWmsPointsVM.wmsPointsService.legendData\" class=\\'rocks-points-legend-item\\'>\\n\\n\t<label>\\n\t\t<input\\n\t\ttype=\"checkbox\"\\n\t\tng-model=\"legend.isSelected\"\\n\t\tng-disabled=\"!rocksWmsPointsVM.rocksPanelService.pointsEnabled\" />\\n\t\t<img ng-src=\"{{legend.legendUrl}}\" alt=\"{{legend}} legend icon\" />\\n\t</label>\\n\\n</div>\\n\\n<a class=\"btn btn-default\"\\n   style=\"width: 100%; margin-top: 20px\"\\n   ng-click=\"rocksWmsPointsVM.wmsPointsService.updatePointsLayer()\"\\n   ng-disabled=\"!rocksWmsPointsVM.rocksPanelService.pointsEnabled\"\\n   href=\"javascript:;\">\\n\t<i class=\"fa fa-refresh fa-lg\"></i>\\n\tUpdate\\n</a>')}]);\n//# sourceMappingURL=explorer-rock-properties-components.min.js.map\n"]}