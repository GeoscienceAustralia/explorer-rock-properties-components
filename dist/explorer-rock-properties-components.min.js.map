{"version":3,"sources":["components/charts.ts","explorer-rock-properties-components.min.js","components/cluster.ts","components/clusters.ts","components/spinner.ts","components/zoom.ts","templates/templates.ts"],"names":["rpComponents","rpComponents.chartService","rpComponents.chartService.ClusterChartCtrl","rpComponents.chartService.ClusterChartCtrl.constructor","rpComponents.chartService.ClusterChartService","rpComponents.chartService.ClusterChartService.constructor","rpComponents.chartService.ClusterChartService.hideChart","rpComponents.chartService.ClusterChartService.buildChart","rpComponents.chartService.ClusterChartService.buildChart.drawLegend","width","i","legendWidth","legendSpacing","height","color","d","attributeName","charSpace","radius","length","substring","total","d3","sum","property","data","map","count","Math","round","rpComponents.chartService.ClusterChartService.buildChart.prevLegend","rpComponents.chartService.ClusterChartService.buildChart.nextLegend","this","_current","percent","tooltip","select","html","style","x","event","pageX","panelWidth","y","pageY","document","body","clientHeight","getElementById","display","templateUrl","controller","ClusterChartCtrl","controllerAs","rpComponents.cluster","rpComponents.cluster.Cluster","rpComponents.cluster.Cluster.constructor","rpComponents.clusterService","rpComponents.clusterService.ClusterService","rpComponents.clusterService.ClusterService.constructor","rpComponents.clusterService.ClusterService.init","rpComponents.clusterService.ClusterService.setHighlighted","rpComponents.clusterService.ClusterService.clearHighlighted","rpComponents.clusterService.ClusterService.toggleClusters","rpComponents.clusterService.ClusterService.getClusters","rpComponents.clusterService.ClusterService.queryCluster","rpComponents.clusterService.ClusterService.drawClusters","rpComponents.clusterService.ClusterService.buildSphereInstance","rpComponents.clusterService.ClusterService.buildLabel","rpComponents.clusterService.ClusterService.computeClusterAttributes","rpComponents.spinnerService","rpComponents.spinnerService.ChartSpinnerService","rpComponents.spinnerService.ChartSpinnerService.addSpinner","spin","selection","duration","interpolateString","min","config","tau","PI","arc","svg","innerRadius","outerRadius","startAngle","container","append","attr","id","datum","endAngle","call","rpComponents.zoom","rpComponents.zoom.ZoomLevelService","rpComponents.zoom.ZoomLevelService.constructor","rpComponents.zoom.ZoomLevelService.getIndex","rpComponents.zoom.ZoomLevelService.setActive","rpComponents.zoom.ZoomLevelService.getViewExtent","angular","module","run","$templateCache","put"],"mappings":"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","file":"explorer-rock-properties-components.min.js","sourceRoot":"/source/","sourcesContent":[null,"var rpComponents;!function(t){var e;!function(e){\"use strict\";var r=function(){function t(t,e,r){this.$scope=t,this.clusterChartService=e,this.clusterService=r}return t.$inject=[\"$scope\",\"clusterChartService\",\"clusterService\"],t}();e.ClusterChartCtrl=r;var n=function(){function t(t,e){this.$http=t,this.$rootScope=e}return t.prototype.hideChart=function(){this.$rootScope.$broadcast(\"chart.update\",{targetChartId:!1})},t.prototype.buildChart=function(t){document.getElementById(\"cluster-summary-chart-d3\").innerHTML=\"\",this.$rootScope.$broadcast(\"chart.update\",{targetChartId:\"clusterSummaryChart\"}),d3.json(\"resources/mock-service/explorer-cossap-services/service/rock-properties/clusters/cluster.json\",function(t,e){var r,n,i,o,s=1250,a=255,c=e.length<7?e.length:4;.35*document.body.clientHeight>a&&document.body.clientWidth>s?(i={top:0,right:10,bottom:0,left:10},r=document.body.clientWidth/c-(2*i.left+i.right),n=.35*document.body.clientHeight,o=20):(i={top:0,right:5,bottom:0,left:5},r=s/c-(2*i.left+i.right),n=a,o=15);var l=document.body.clientWidth-(2*i.left+i.right),u=Math.min(r,n)/2;e.forEach(function(t){function e(e,i,o,l){var h=p.selectAll(\"g.legendg\").data(e).enter().append(\"g\").attr(\"class\",\"legendg\").attr(\"transform\",function(t,e){return\"translate(\"+-(r/2.3)+\",\"+(e*(S+x)-n/4)+\")\"}),d=h.append(\"rect\").attr(\"x\",45).attr(\"width\",S).attr(\"height\",S).attr(\"class\",\"legend\").style(\"fill\",function(t,e){return c(t.attributeName)}),m=h.append(\"text\").attr(\"x\",65).attr(\"y\",6).attr(\"dy\",\".35em\").style(\"text-anchor\",\"start\").text(function(t){var e=(u-20)/5;return t.attributeName.length>e?t.attributeName.substring(0,e)+\"...\":t.attributeName});if(d.append(\"svg:title\").text(function(e){var r=d3.sum(t.data.map(function(t){return t.count}));return e.attributeName+\" (\"+Math.round(1e3*e.count/r)/10+\"%)\"}),m.append(\"svg:title\").text(function(e){var r=d3.sum(t.data.map(function(t){return t.count}));return e.attributeName+\" (\"+Math.round(1e3*e.count/r)/10+\"%)\"}),l>1){var v=p.append(\"g\").attr(\"class\",\"pageNo\").attr(\"transform\",\"translate(-10,\"+((i+1)*(S+x)-n/4)+\")\");v.append(\"text\").text(o+\"/\"+l).attr(\"dx\",\".25em\");var C=p.append(\"g\").attr(\"class\",\"prev\").attr(\"transform\",\"translate(-20,\"+((i+1.5)*(S+x)-n/4)+\")\").on(\"click\",s).style(\"cursor\",\"pointer\"),g=p.append(\"g\").attr(\"class\",\"next\").attr(\"transform\",\"translate(0,\"+((i+1.5)*(S+x)-n/4)+\")\").on(\"click\",a).style(\"cursor\",\"pointer\");g.append(\"polygon\").style(\"stroke\",\"#000\").style(\"fill\",\"#000\").attr(\"points\",\"0,0, 20,0, 10,10\"),C.append(\"polygon\").style(\"stroke\",\"#000\").style(\"fill\",\"#000\").attr(\"points\",\"0,10, 20,10, 10,0\"),o==l?(g.style(\"opacity\",\"0.3\"),g.on(\"click\",\"\").style(\"cursor\",\"\")):1==o&&(C.style(\"opacity\",\"0.3\"),C.on(\"click\",\"\").style(\"cursor\",\"\"))}}function s(){f--,p.selectAll(\"g.legendg\").remove(),p.select(\".pageNo\").remove(),p.select(\".prev\").remove(),p.select(\".next\").remove();for(var r=(f-1)*C,n=r+C,i=[],o=0;o<t.data.length;o++)o>=r&&n>o&&i.push(t.data[o]);e(i,C,f,g)}function a(){f++,p.selectAll(\"g.legendg\").remove(),p.select(\".pageNo\").remove(),p.select(\".prev\").remove(),p.select(\".next\").remove();for(var r=(f-1)*C,n=r+C,i=[],o=0;o<t.data.length;o++)o>=r&&n>o&&i.push(t.data[o]);e(i,C,f,g)}var c=d3.scale.category20(),p=d3.select(\"#cluster-summary-chart-d3\").append(\"svg\").attr(\"width\",r).attr(\"height\",n).style(\"margin-left\",i.left+\"px\").style(\"margin-right\",i.right+\"px\").append(\"g\").attr(\"transform\",\"translate(\"+r/2+\",\"+(n/2+10)+\")\"),h=d3.svg.arc().innerRadius(u-o).outerRadius(u),d=d3.layout.pie().value(function(t){return t.count}).sort(null),m=d3.select(\"#cluster-summary-chart-d3\").append(\"div\").attr(\"class\",\"cluster-summary-tooltip\");m.append(\"div\").attr(\"class\",\"attribute\"),m.append(\"div\").attr(\"class\",\"count\"),m.append(\"div\").attr(\"class\",\"percent\");var v=p.selectAll(\"path\").data(d(t.data)).enter().append(\"path\").attr(\"d\",h).attr(\"fill\",function(t,e){return c(t.data.attributeName)}).each(function(t){this._current=t});v.on(\"mouseover\",function(e){var r=d3.sum(t.data.map(function(t){return t.count})),n=Math.round(1e3*e.data.count/r)/10;m.select(\".attribute\").html(e.data.attributeName),m.select(\".count\").html(\"Count: \"+e.data.count),m.select(\".percent\").html(\"Percent: \"+n+\"%\"),m.style(\"display\",\"block\")}),v.on(\"mouseout\",function(){m.style(\"display\",\"none\")}),v.on(\"mousemove\",function(t){var e=d3.event.pageX>l-180?d3.event.pageX-180:d3.event.pageX,r=d3.event.pageY>document.body.clientHeight-120?d3.event.pageY-100:d3.event.pageY+10;m.style(\"top\",r+\"px\").style(\"left\",e+\"px\")}),p.append(\"g\").attr(\"class\",\"cluster-summary-chart-title\").append(\"text\").attr(\"x\",0).attr(\"y\",-(n/2+7)).attr(\"dy\",\".71em\").style(\"text-anchor\",\"middle\").style(\"fill\",\"#000\").style(\"font-weight\",\"bold\").text(t.propertyName);var C,g,f,y=t.data.length,S=15,x=6,w=(S+x)*y;if(w/u>1){C=Math.floor(u/(S+x)),g=Math.ceil(y/C),f=1;for(var b=(f-1)*C,I=b+C,E=[],A=0;A<t.data.length;A++)A>=b&&I>A&&E.push(t.data[A]);e(E,C,f,g)}else e(t.data,Math.floor(u/(S+x)),1,1)})}),document.getElementById(\"cluster-summary-chart-d3\").style.display=\"none\",setTimeout(function(){document.getElementById(\"cluster-summary-chart-loading\").style.display=\"none\",document.getElementById(\"cluster-summary-chart-d3\").style.display=\"block\"},1500)},t.$inject=[\"$http\",\"$rootScope\"],t}();e.ClusterChartService=n,angular.module(\"explorer.rockproperties.charts\",[]).factory(\"clusterChartService\",[\"$http\",\"$rootScope\",function(e,r){return new t.chartService.ClusterChartService(e,r)}]).controller(\"clusterChartCtrl\",r).directive(\"clusterChartSummary\",function(){return{templateUrl:\"rockprops/cluster-summary.html\",controller:r,controllerAs:\"clusterChartVM\"}})}(e=t.chartService||(t.chartService={}))}(rpComponents||(rpComponents={}));var rpComponents;!function(t){var e;!function(t){\"use strict\";var e=function(){function t(t,e,r,n,i,o,s,a,c){this.count=t,this.lat=e,this.lon=r,this.elev=n,this.lithologyGroup=i,this.property=o,this.provinceName=s,this.sampleType=a,this.stratigraphicUnitName=c}return t.$inject=[\"count\",\"lat\",\"lon\",\"elev\",\"lithologyGroup\",\"property\",\"provinceName\",\"sampleType\",\"stratigraphicUnitName\"],t}();t.Cluster=e}(e=t.cluster||(t.cluster={}))}(rpComponents||(rpComponents={}));var rpComponents;!function(t){var e;!function(e){\"use strict\";var r=function(){function t(t,e,r,n,i){var o=this;this.$http=t,this.$rootScope=e,this.zoomLevelService=r,this.clusterChartService=n,this.chartSpinnerService=i,this.reCluster=function(){var t=[],e=new Cesium.LabelCollection;o.getClusters().then(function(r){if(r.data){for(var n=r.data,i=0;i<n.length;i++)t.push(o.buildSphereInstance(n[i])),e.add(o.buildLabel(n[i]));o.drawClusters(t,e)}else console.log(\"got no clusters\")})}}return t.prototype.init=function(t,e,r){var n=this;this.viewer=t,this.zoomLevelService.viewer=t,this.serviceUrl=e,this.$rootScope.$on(\"rocks.clusters.update\",function(){n.reCluster()}),r&&(this.pickHandler=new Cesium.ScreenSpaceEventHandler(this.viewer.scene.canvas),this.pickHandlerAction=function(t){var e=n.viewer.scene.pick(t.position);Cesium.defined(e)&&e.hasOwnProperty(\"id\")&&e.id.hasOwnProperty(\"lat\")&&(n.clearHighlighted(),n.targetId=e.id,n.queryCluster(n.targetId),n.setHighlighted(n.targetId,!0))},this.pickHandler.setInputAction(this.pickHandlerAction,Cesium.ScreenSpaceEventType.LEFT_CLICK))},t.prototype.setHighlighted=function(t,e){var r=this.clusterPrimitive.getGeometryInstanceAttributes(t);r&&e&&(r.prevColor=r.color,r.color=Cesium.ColorGeometryInstanceAttribute.toValue(Cesium.Color.fromCssColorString(\"#F5ED05\").withAlpha(1)))},t.prototype.clearHighlighted=function(){if(this.targetId){var t=this.clusterPrimitive.getGeometryInstanceAttributes(this.targetId);t&&t.hasOwnProperty(\"prevColor\")&&(t.color=t.prevColor)}},t.prototype.toggleClusters=function(){this.clustersCollection?(this.clustersCollection.show=!this.clustersCollection.show,this.zoomLevelService.setActive(this.clustersCollection.show),this.clustersCollection.show?this.pickHandler.setInputAction(this.pickHandlerAction,Cesium.ScreenSpaceEventType.LEFT_CLICK):this.pickHandler.removeInputAction(Cesium.ScreenSpaceEventType.LEFT_CLICK),this.reCluster()):(this.clustersCollection=new Cesium.PrimitiveCollection,this.viewer.scene.primitives.add(this.clustersCollection),this.zoomLevelService.setActive(!0),this.reCluster())},t.prototype.getClusters=function(){return this.$http({method:\"GET\",url:this.serviceUrl+this.zoomLevelService.nextIndex+\".json\",headers:{\"Content-Type\":\"application/json\"},data:{heightIndex:this.zoomLevelService.nextIndex,extent:this.zoomLevelService.getViewExtent(100)}})},t.prototype.queryCluster=function(t){var e=this;this.summarySpinner?document.getElementById(\"cluster-summary-chart-loading\").style.display=\"block\":(this.summarySpinner=this.chartSpinnerService.addSpinner({width:100,height:100,container:\"#cluster-summary-chart-loading\",id:\"chart-spinner\"}),this.summarySpinner()),this.$http({method:\"GET\",url:this.serviceUrl+\"cluster-summary.json\",headers:{\"Content-Type\":\"application/json\"},data:{targetCluster:t}}).then(function(t){t.hasOwnProperty(\"data\")&&e.clusterChartService.buildChart(t.data)})},t.prototype.drawClusters=function(t,e){this.clustersCollection.removeAll(),this.clusterPrimitive=new Cesium.Primitive({geometryInstances:t,appearance:new Cesium.PerInstanceColorAppearance({translucent:!0,closed:!0})}),this.clustersCollection.add(this.clusterPrimitive),this.clustersCollection.add(e)},t.prototype.buildSphereInstance=function(t){var e=this.computeClusterAttributes(t.count),r=Cesium.Cartesian3.fromDegrees(t.lon,t.lat),n=Cesium.Matrix4.multiplyByTranslation(Cesium.Transforms.eastNorthUpToFixedFrame(r),new Cesium.Cartesian3(t.lon,t.lat,e.size),new Cesium.Matrix4),i=new Cesium.SphereGeometry({vertexFormat:Cesium.PerInstanceColorAppearance.VERTEX_FORMAT,radius:e.size}),o=new Cesium.GeometryInstance({geometry:i,modelMatrix:n,vertexFormat:Cesium.EllipsoidSurfaceAppearance.VERTEX_FORMAT,attributes:{color:Cesium.ColorGeometryInstanceAttribute.fromColor(e.color)},id:t});return o},t.prototype.buildLabel=function(t){var e=this.computeClusterAttributes(t.count);return{position:Cesium.Cartesian3.fromDegrees(t.lon,t.lat,20+2*e.size),text:t.count.toString(),fillColor:Cesium.Color.BLACK,outlineColor:Cesium.Color.RED,font:\"30px arial, sans-serif\",horizontalOrigin:Cesium.HorizontalOrigin.CENTER,id:t}},t.prototype.computeClusterAttributes=function(t){return 100>t?{size:1e4*this.zoomLevelService.nextIndex,color:Cesium.Color.fromCssColorString(\"#4781cd\").withAlpha(.5)}:t>=10&&1e3>t?{size:1e4*this.zoomLevelService.nextIndex,color:Cesium.Color.fromCssColorString(\"#0fc70e\").withAlpha(.5)}:{size:1e4*this.zoomLevelService.nextIndex,color:Cesium.Color.fromCssColorString(\"#ff0000\").withAlpha(.5)}},t.$inject=[\"$http\",\"$rootScope\",\"zoomLevelService\",\"clusterChartService\",\"chartSpinnerService\"],t}();e.ClusterService=r,angular.module(\"explorer.rockproperties.clusters\",[]).factory(\"clusterService\",[\"$http\",\"$rootScope\",\"zoomLevelService\",\"clusterChartService\",\"chartSpinnerService\",function(e,r,n,i,o){return new t.clusterService.ClusterService(e,r,n,i,o)}])}(e=t.clusterService||(t.clusterService={}))}(rpComponents||(rpComponents={}));var rpComponents;!function(t){var e;!function(e){\"use strict\";var r=function(){function t(){}return t.prototype.addSpinner=function(t){return function(){function e(t,r){t.transition().ease(\"linear\").duration(r).attrTween(\"transform\",function(){return d3.interpolateString(\"rotate(0)\",\"rotate(360)\")}),setTimeout(function(){e(t,r)},r)}var r=Math.min(t.width,t.height)/2,n=2*Math.PI,i=d3.svg.arc().innerRadius(.5*r).outerRadius(.9*r).startAngle(0),o=d3.select(t.container).append(\"svg\").attr(\"id\",t.id).attr(\"width\",t.width).attr(\"height\",t.height).append(\"g\").attr(\"transform\",\"translate(\"+t.width/2+\",\"+t.height/2+\")\");o.append(\"path\").datum({endAngle:.33*n}).style(\"fill\",\"#4D4D4D\").attr(\"d\",i).call(e,1500)}},t}();e.ChartSpinnerService=r,angular.module(\"explorer.rockproperties.spinner\",[]).factory(\"chartSpinnerService\",[function(){return new t.spinnerService.ChartSpinnerService}])}(e=t.spinnerService||(t.spinnerService={}))}(rpComponents||(rpComponents={}));var rpComponents;!function(t){var e;!function(e){\"use strict\";var r=function(){function t(t){var e=this;this.$rootScope=t,this.zoomLevels=[5e3,1e4,2e4,4e4,75e4,15e5,25e5,35e5,55e5,65e5,8e6],this.defaultExtent={west:109,south:-45,east:158,north:-8},this.moveEndHandler=function(){e.nextIndex=e.getIndex(Cesium.Ellipsoid.WGS84.cartesianToCartographic(e.viewer.camera.position).height),e.previousIndex>-1&&e.previousIndex!=e.nextIndex&&e.$rootScope.$broadcast(\"rocks.clusters.update\",e.nextIndex),e.previousIndex=e.nextIndex}}return t.prototype.getIndex=function(t){for(var e=0;e<this.zoomLevels.length;e++)if(t<this.zoomLevels[e])return e;return this.zoomLevels.length-1},t.prototype.setActive=function(t){t?(this.previousIndex=this.getIndex(Cesium.Ellipsoid.WGS84.cartesianToCartographic(this.viewer.camera.position).height),this.nextIndex=this.previousIndex,this.viewer.camera.moveEnd.addEventListener(this.moveEndHandler)):this.viewer.camera.moveEnd.removeEventListener(this.moveEndHandler)},t.prototype.getViewExtent=function(t){var e=Cesium.Ellipsoid.WGS84,r=window.devicePixelRatio||1,n=new Cesium.Cartesian2(-t,-t),i=this.viewer.scene.camera.pickEllipsoid(n,e);n=new Cesium.Cartesian2(this.viewer.scene.canvas.width/r+t,this.viewer.scene.canvas.height/r+t);var o=this.viewer.scene.camera.pickEllipsoid(n,e);return null!=i&&null!=o?(i=e.cartesianToCartographic(i),o=e.cartesianToCartographic(o),i.longitude>o.longitude?this.defaultExtent:{west:Cesium.Math.toDegrees(i.longitude),south:Cesium.Math.toDegrees(o.latitude),east:Cesium.Math.toDegrees(o.longitude),north:Cesium.Math.toDegrees(i.latitude)}):this.defaultExtent},t.$inject=[\"$rootScope\"],t}();e.ZoomLevelService=r,angular.module(\"explorer.rockproperties.zoom\",[]).factory(\"zoomLevelService\",[\"$rootScope\",function(e){return new t.zoom.ZoomLevelService(e)}])}(e=t.zoom||(t.zoom={}))}(rpComponents||(rpComponents={})),angular.module(\"explorer.rockproperties.templates\",[]).run([\"$templateCache\",function(t){t.put(\"rockprops/cluster-summary.html\",'<div id=\"clusterSummaryChart\" ng-show=\"cossapChartState.targetChartId == \\'clusterSummaryChart\\'\">\\n\\n\t<div class=\"btn-group\" style=\"position: absolute;right: 10px;top: 10px;\">\\n\t\t<button type=\"button\" class=\"btn btn-default\" title=\"Close charts\" ng-click=\"clusterChartVM.clusterChartService.hideChart(); clusterChartVM.clusterService.clearHighlighted();\">\\n\t\t\t<i class=\"fa fa-times-circle\" role=\"presentation\" style=\"font-size:16px; color:black\"></i>\\n\t\t</button>\\n\t</div>\\n\\n\t<div id=\"cluster-summary-chart-d3\"></div>\\n\t<div id=\"cluster-summary-chart-loading\"></div>\\n\\n</div>')}]);\n//# sourceMappingURL=explorer-rock-properties-components.min.js.map\n"]}