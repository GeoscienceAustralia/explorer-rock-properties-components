var rpComponents;!function(e){var o;!function(o){"use strict";var t=function(){function e(e){this.$rootScope=e}return e.prototype.setConfig=function(e,o){this.config=e,this.viewer=o,this.$rootScope.$broadcast("rocks.config.ready")},e.$inject=["$rootScope"],e}();o.RocksConfigService=t,angular.module("explorer.rockproperties.config",[]).factory("rocksConfigService",["$rootScope",function(o){return new e.config.RocksConfigService(o)}])}(o=e.config||(e.config={}))}(rpComponents||(rpComponents={}));var rpComponents;!function(e){var o;!function(e){"use strict"}(o=e.zoom||(e.zoom={}))}(rpComponents||(rpComponents={}));var rpComponents;!function(e){var o;!function(o){"use strict";var t=function(){function e(e,o){var t=this;this.$rootScope=e,this.rocksConfigService=o,this.zoomLevels=[5e3,1e4,2e4,3e4,5e4,8e4,2e5,1e6,15e5,2e6,4e6,65e5,85e5,1e7,15e6,1e8],this.defaultExtent={west:109,south:-45,east:158,north:-8},this.moveEndHandler=function(){t.nextPosition=Cesium.Ellipsoid.WGS84.cartesianToCartographic(t.viewer.camera.position),(t.previousPosition.height>-1&&t.getIndex(t.previousPosition.height)!=t.nextIndex||Math.abs(t.nextPosition.latitude-t.previousPosition.latitude)>.01/t.nextIndex||Math.abs(t.nextPosition.longitude-t.previousPosition.longitude)>.01/t.nextIndex||16==t.nextIndex)&&t.$rootScope.$broadcast("rocks.clusters.update",t.nextIndex),console.log("INDEX = "+t.nextIndex+" HEIGHT = "+Cesium.Ellipsoid.WGS84.cartesianToCartographic(t.viewer.camera.position).height),t.previousPosition=t.nextPosition},this.$rootScope.$on("rocks.config.ready",function(){t.viewer=t.rocksConfigService.viewer})}return Object.defineProperty(e.prototype,"nextIndex",{get:function(){return this.getIndex(this.nextPosition.height)},enumerable:!0,configurable:!0}),e.prototype.getIndex=function(e){for(var o=0;o<this.zoomLevels.length;o++)if(e<this.zoomLevels[o])return this.zoomLevels.length-o;return this.zoomLevels.length-1},e.prototype.setActive=function(e){e?(this.nextPosition=this.previousPosition=Cesium.Ellipsoid.WGS84.cartesianToCartographic(this.viewer.camera.position),this.viewer.camera.moveEnd.addEventListener(this.moveEndHandler)):this.viewer.camera.moveEnd.removeEventListener(this.moveEndHandler)},e.prototype.getViewExtent=function(e){var o=Cesium.Ellipsoid.WGS84,t=window.devicePixelRatio||1,i=new Cesium.Cartesian2(-e,-e),n=this.viewer.scene.camera.pickEllipsoid(i,o);i=new Cesium.Cartesian2(this.viewer.scene.canvas.width/t+e,this.viewer.scene.canvas.height/t+e);var r=this.viewer.scene.camera.pickEllipsoid(i,o);return null!=n&&null!=r?(n=o.cartesianToCartographic(n),r=o.cartesianToCartographic(r),n.longitude>r.longitude?this.defaultExtent:{west:Cesium.Math.toDegrees(n.longitude),south:Cesium.Math.toDegrees(r.latitude),east:Cesium.Math.toDegrees(r.longitude),north:Cesium.Math.toDegrees(n.latitude)}):this.defaultExtent},e.$inject=["$rootScope","rocksConfigService"],e}();o.LeafletZoomLevelService=t,angular.module("explorer.rockproperties.zoom",[]).factory("zoomLevelService",["$rootScope","rocksConfigService",function(o,t){return new e.zoom.LeafletZoomLevelService(o,t)}])}(o=e.zoom||(e.zoom={}))}(rpComponents||(rpComponents={}));