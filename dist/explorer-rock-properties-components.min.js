var rpComponents;!function(e){var t;!function(e){"use strict";var t=function(){function e(e,t,r,o,s,i,n,l,u){this.count=e,this.lat=t,this.lon=r,this.elev=o,this.lithologyGroup=s,this.property=i,this.provinceName=n,this.sampleType=l,this.stratigraphicUnitName=u}return e.$inject=["count","lat","lon","elev","lithologyGroup","property","provinceName","sampleType","stratigraphicUnitName"],e}();e.Cluster=t}(t=e.cluster||(e.cluster={}))}(rpComponents||(rpComponents={}));var rpComponents;!function(e){var t;!function(t){"use strict";var r=function(){function e(e,t){this.$http=e,this.$rootScope=t}return e.prototype.init=function(e,t){this.viewer=e,this.serviceUrl=t},e.prototype.toggleClusters=function(){this.clustersCollection?this.clustersCollection.show=!this.clustersCollection.show:(this.clustersCollection=new Cesium.PrimitiveCollection,this.viewer.scene.primitives.add(this.clustersCollection),this.addClusters())},e.prototype.getClusters=function(){return this.$http.get(this.serviceUrl+"clusters")},e.prototype.addClusters=function(){var e=this,t=[],r=new Cesium.LabelCollection;this.getClusters().then(function(o){if(o.data){for(var s=o.data,i=0;i<s.length;i++)t.push(e.buildSphereInstance(s[i])),r.add(e.buildLabel(s[i]));e.drawClusters(t,r)}else console.log("got no clusters")})},e.prototype.drawClusters=function(e,t){this.clustersCollection.add(new Cesium.Primitive({geometryInstances:e,appearance:new Cesium.PerInstanceColorAppearance({translucent:!0,closed:!0})})),this.clustersCollection.add(t)},e.prototype.buildSphereInstance=function(e){var t=this.computeClusterAttributes(e.count),r=Cesium.Cartesian3.fromDegrees(e.lon,e.lat),o=Cesium.Matrix4.multiplyByTranslation(Cesium.Transforms.eastNorthUpToFixedFrame(r),new Cesium.Cartesian3(e.lon,e.lat,e.elev+t.size),new Cesium.Matrix4),s=new Cesium.SphereGeometry({vertexFormat:Cesium.PerInstanceColorAppearance.VERTEX_FORMAT,radius:t.size}),i=new Cesium.GeometryInstance({geometry:s,modelMatrix:o,attributes:{color:Cesium.ColorGeometryInstanceAttribute.fromColor(t.color)}});return i},e.prototype.buildLabel=function(e){var t=this.computeClusterAttributes(e.count);return{position:Cesium.Cartesian3.fromDegrees(e.lon,e.lat,e.elev+20+2*t.size),text:e.count.toString(),fillColor:Cesium.Color.BLACK,outlineColor:Cesium.Color.RED,font:"30px arial, sans-serif",horizontalOrigin:Cesium.HorizontalOrigin.CENTER}},e.prototype.computeClusterAttributes=function(e){return 10>e?{size:6e4,color:Cesium.Color.fromCssColorString("#4781cd").withAlpha(.5)}:e>=10&&250>e?{size:8e4,color:Cesium.Color.fromCssColorString("#0fc70e").withAlpha(.5)}:{size:9e4,color:Cesium.Color.fromCssColorString("#ff0000").withAlpha(.5)}},e.$inject=["$http","$rootScope"],e}();t.ClusterService=r,angular.module("explorer.rockproperties.clusters",[]).factory("clusterService",["$http","$rootScope",function(t,r){return new e.clusterService.ClusterService(t,r)}])}(t=e.clusterService||(e.clusterService={}))}(rpComponents||(rpComponents={}));
//# sourceMappingURL=explorer-rock-properties-components.min.js.map
